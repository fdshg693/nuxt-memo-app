# サブタスク一覧 - Nuxt SQL学習アプリ機能拡張

## プロジェクト概要
Nuxt 3ベースのインタラクティブSQL学習プラットフォームに以下4つの主要機能を追加・改善する

## 機能別詳細サブタスク

### 1. AIプロンプトシステムの改善

#### 1.1 データ構造設計
- **タスクID**: PROMPT-001
- **内容**: プロンプトテンプレート用のJSONスキーマ設計
- **成果物**: `/data/promptTemplates.json` スキーマ定義
- **工数**: 0.5日

#### 1.2 UIコンポーネント改修
- **タスクID**: PROMPT-002
- **内容**: `AiPromptModal.vue` の自由テキスト入力対応
- **成果物**: 改修されたコンポーネント
- **工数**: 2日

#### 1.3 説明文章統合機能
- **タスクID**: PROMPT-003
- **内容**: `/data/sqlExplanation/` との連携機能実装
- **成果物**: 説明文章取得用のcomposable
- **工数**: 1.5日

#### 1.4 プロンプト処理ロジック
- **タスクID**: PROMPT-004
- **内容**: `/server/api/openai.post.ts` のプロンプト処理改善
- **成果物**: 改修されたAPIエンドポイント
- **工数**: 1日

### 2. AI自動問題生成機能

#### 2.1 問題生成API開発
- **タスクID**: GENERATE-001
- **内容**: `/server/api/generate-question.post.ts` 新規作成
- **成果物**: AI問題生成エンドポイント
- **工数**: 2.5日

#### 2.2 問題保存API開発
- **タスクID**: GENERATE-002
- **内容**: `/server/api/save-question.post.ts` 新規作成
- **成果物**: 生成問題保存エンドポイント
- **工数**: 1日

#### 2.3 問題生成UI開発
- **タスクID**: GENERATE-003
- **内容**: `AiQuestionGenerator.vue` 新規作成
- **成果物**: 問題生成用UIコンポーネント
- **工数**: 2日

#### 2.4 問題検証システム
- **タスクID**: GENERATE-004
- **内容**: 生成問題の自動検証・難易度判定機能
- **成果物**: 検証用composable
- **工数**: 2日

### 3. Markdown回答表示システム

#### 3.1 Markdownライブラリ導入
- **タスクID**: MARKDOWN-001
- **内容**: `@nuxt/content` または `markdown-it` の導入・設定
- **成果物**: Markdownレンダリング環境
- **工数**: 1日

#### 3.2 Markdownレンダラー開発
- **タスクID**: MARKDOWN-002
- **内容**: `MarkdownRenderer.vue` 新規作成
- **成果物**: Markdown表示コンポーネント
- **工数**: 1.5日

#### 3.3 SQLハイライト機能
- **タスクID**: MARKDOWN-003
- **内容**: SQLコードのシンタックスハイライト実装
- **成果物**: highlight.js統合
- **工数**: 1日

#### 3.4 既存コンポーネント連携
- **タスクID**: MARKDOWN-004
- **内容**: `SqlEditor.vue` のMarkdown表示対応
- **成果物**: 改修されたSqlEditor
- **工数**: 1日

### 4. 実践的SQL問題の追加

#### 4.1 選択式問題スキーマ設計
- **タスクID**: PRACTICAL-001
- **内容**: 選択式問題用のJSONスキーマ設計
- **成果物**: 新しいデータ構造定義
- **工数**: 0.5日

#### 4.2 選択式問題コンポーネント
- **タスクID**: PRACTICAL-002
- **内容**: `MultipleChoiceQuestion.vue` 新規作成
- **成果物**: 選択式問題表示コンポーネント
- **工数**: 2日

#### 4.3 TRANSACTION問題作成
- **タスクID**: PRACTICAL-003
- **内容**: TRANSACTION関連の選択式問題データ作成
- **成果物**: transaction問題JSONファイル
- **工数**: 1.5日

#### 4.4 パフォーマンス問題作成
- **タスクID**: PRACTICAL-004
- **内容**: パフォーマンス関連の選択式問題データ作成
- **成果物**: performance問題JSONファイル
- **工数**: 1.5日

#### 4.5 DEAD LOCK問題作成
- **タスクID**: PRACTICAL-005
- **内容**: DEAD LOCK関連の選択式問題データ作成
- **成果物**: deadlock問題JSONファイル
- **工数**: 1.5日

#### 4.6 問題統合システム
- **タスクID**: PRACTICAL-006
- **内容**: 既存SQLクエリ問題との統合機能
- **成果物**: 統合された問題システム
- **工数**: 2日

### 5. 共通・統合タスク

#### 5.1 型定義整備
- **タスクID**: COMMON-001
- **内容**: TypeScript型定義の整備・追加
- **成果物**: 更新された型定義ファイル
- **工数**: 1日

#### 5.2 テスト作成
- **タスクID**: COMMON-002
- **内容**: 新機能用のユニットテスト作成
- **成果物**: テストファイル一式
- **工数**: 2日

#### 5.3 ドキュメント更新
- **タスクID**: COMMON-003
- **内容**: README・開発ドキュメントの更新
- **成果物**: 更新されたドキュメント
- **工数**: 1日

#### 5.4 統合テスト
- **タスクID**: COMMON-004
- **内容**: 全機能の統合テスト・調整
- **成果物**: 統合済みシステム
- **工数**: 2日

## 工数サマリー

| 機能カテゴリ | サブタスク数 | 合計工数 |
|-------------|-------------|---------|
| AIプロンプト改善 | 4タスク | 5日 |
| AI問題生成 | 4タスク | 7.5日 |
| Markdown表示 | 4タスク | 4.5日 |
| 実践的問題 | 6タスク | 9日 |
| 共通・統合 | 4タスク | 6日 |
| **合計** | **22タスク** | **32日** |

## 依存関係

### 前提条件
- 既存のNuxt 3アプリケーション
- OpenAI API連携済み
- AlaSQL + JSON アーキテクチャ

### タスク間依存関係
- MARKDOWN-004 → MARKDOWN-001, MARKDOWN-002 (Markdownレンダラー完成後)
- GENERATE-003 → GENERATE-001, GENERATE-002 (API完成後)
- PRACTICAL-006 → PRACTICAL-001, PRACTICAL-002 (基盤完成後)
- COMMON-004 → 各機能の主要タスク完成後

### 並行実行可能なタスクグループ
- **グループ A**: PROMPT-001, MARKDOWN-001, PRACTICAL-001, COMMON-001
- **グループ B**: PROMPT-002, GENERATE-001, PRACTICAL-003, PRACTICAL-004, PRACTICAL-005
- **グループ C**: MARKDOWN-002, MARKDOWN-003, PRACTICAL-002