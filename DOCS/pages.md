# pages フォルダのガイド

このドキュメントは、`pages/` フォルダの目的、Nuxt におけるルーティング規約、よくある落とし穴、運用上の推奨事項をまとめたものです。

## 目的
- `pages/` はアプリのページコンポーネントを置く場所です。ファイル構成が自動的にルート構造にマッピングされます。
- 開発者や新しい貢献者がルーティングとページの作り方を素早く理解できるようにするための参照を提供します。

## 新しく追加されたルートの例
- `/sql/random` - SQL 問題をランダムに出題するページ。既存の `/sql/[[id]]` を再利用しつつ、前へ/次へナビゲーションを隠し、再抽選ボタンで別の問題を表示します。

## 基本ルール（Nuxt 3 互換）
- `pages/index.vue` -> `/`
- `pages/about.vue` -> `/about`
- `pages/users/index.vue` -> `/users`
- `pages/users/profile.vue` -> `/users/profile`
- `pages/users/[id].vue` -> `/users/:id` （動的ルート）
- `pages/users/[...slug].vue` -> キャッチオールルート `/users/*`

ファイル名は小文字が一般的です。拡張子は `.vue` を使います。

## 動的ルートと Props
- 動的ルートファイル名は角括弧で囲みます。例: `[id].vue`。
- ページ内では `useRoute()` や `defineProps()` でパラメータにアクセスします。

## レイアウトとネスト
- ページは `layouts/` のレイアウトを使用できます。ページの `definePageMeta()` や `layout` プロパティで指定します。
- ネストしたフォルダ構成はネストされた URL を作りますが、Vue コンポーネント側での状態受け渡しに注意してください。

## よくあるミス・落とし穴
- README.md の使用: `pages/README.md` を置くと、プロジェクトのビルド設定やプラグインによってはコンテンツとして扱われることがあります（例: `@nuxt/content` など）。`.md` ファイルがビルドに含まれないか確認してください。
- ファイル名の衝突: 同じパスを生成する複数のファイル（例: `about.vue` と `about/index.vue`）は避ける。
- 拡張子の誤り: `.js` や `.ts` を置いてもページとして扱われないことがある。ページは `.vue`（または Nuxt のドキュメントに従った設定）にする。
- コンポーネントの自動インポートと名前衝突: `components/` と `pages/` の名前空間を分け、明確に保つ。

## README を `pages` に置くか？
- 短い `README.md` を置いておくと新しい開発者の手助けになります。ただし、上記の通り `.md` を処理するモジュールがある場合は、ビルドに影響を与えないように設定を確認してください。
- 代替案として `DOCS/pages.md` に詳細を置き、`pages/README.md` は短い案内と `DOCS/pages.md` へのリンクに留める方法も推奨します。

## 運用ルール（推奨）
1. ルーティングの変更を行う際は `DOCS/pages.md` を更新する。
2. `pages/` にドキュメントを置く場合は短くし、技術的詳細は `DOCS/` にまとめる。
3. `.md` がビルドで誤処理される場合は、`nuxt.config.ts` の設定で除外するか、ファイル名を `README.txt` にする。

## 例（サンプル構成）
- pages/
  - index.vue  -> /
  - login.vue  -> /login
  - users/
    - index.vue -> /users
    - [id].vue  -> /users/:id

## 参照
- プロジェクトの `nuxt.config.ts` を参照してカスタムのルーティングやファイル処理設定を確認してください。
- DOCS/README.md
- CONTRIBUTING.md（存在する場合）

---

このファイルは短く保ち、必要に応じて `DOCS/` 側に詳しい説明や例を増やしてください。
